-- MySQL Script generated by MySQL Workbench
-- Mon May 20 12:22:20 2024
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
-- -----------------------------------------------------
-- Schema odplanDDBB
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema odplanDDBB
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `odplanDDBB` ;
USE `odplanDDBB` ;

-- -----------------------------------------------------
-- Table `odplanDDBB`.`worker`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `odplanDDBB`.`worker` (
  `idWorker` INT NOT NULL,
  `userName` VARCHAR(45) COLLATE 'utf8mb3_spanish_ci' NULL DEFAULT NULL,
  `fullName` VARCHAR(120) COLLATE 'utf8mb3_spanish_ci' NULL DEFAULT NULL,
  `password` VARCHAR(45) COLLATE 'utf8mb3_spanish_ci' NULL DEFAULT NULL,
  `sinceDate` DATE NULL DEFAULT NULL,
  `ss` VARCHAR(45) COLLATE 'utf8mb3_spanish_ci' NULL DEFAULT NULL,
  `dni` VARCHAR(45) COLLATE 'utf8mb3_spanish_ci' NULL DEFAULT NULL,
  `section` VARCHAR(45) COLLATE 'utf8mb3_spanish_ci' NULL DEFAULT NULL,
  `rank` VARCHAR(45) COLLATE 'utf8mb3_spanish_ci' NULL DEFAULT NULL,
  `address` VARCHAR(45) COLLATE 'utf8mb3_spanish_ci' NULL DEFAULT NULL,
  `telNum` VARCHAR(15) COLLATE 'utf8mb3_spanish_ci' NULL DEFAULT NULL,
  `email` VARCHAR(45) COLLATE 'utf8mb3_spanish_ci' NULL DEFAULT NULL,
  `contact` VARCHAR(100) COLLATE 'utf8mb3_spanish_ci' NULL DEFAULT NULL,
  `docFolder` VARCHAR(255) COLLATE 'utf8mb3_spanish_ci' NULL DEFAULT NULL,
  `active` ENUM('YES', 'NO') COLLATE 'utf8mb3_spanish_ci' NULL DEFAULT NULL,
  `workerType` ENUM('WORKER', 'SECTION', 'ALL') COLLATE 'utf8mb3_spanish_ci' NULL DEFAULT NULL,
  `workerRol` ENUM('ADMIN', 'WORKER') COLLATE 'utf8mb3_spanish_ci' NULL DEFAULT NULL,
  PRIMARY KEY (`idWorker`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `odplanDDBB`.`taskType`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `odplanDDBB`.`taskType` (
  `idTask` INT NOT NULL,
  `name` VARCHAR(45) COLLATE 'utf8mb3_spanish_ci' NULL DEFAULT NULL,
  PRIMARY KEY (`idTask`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `odplanDDBB`.`abilities`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `odplanDDBB`.`abilities` (
  `idTask` INT NULL DEFAULT NULL,
  `idWorker` INT NULL DEFAULT NULL,
  INDEX `fk_abilities_1_idx` (`idWorker` ASC) VISIBLE,
  INDEX `fk_abilities_2_idx` (`idTask` ASC) VISIBLE,
  CONSTRAINT `fk_abilities_1`
    FOREIGN KEY (`idWorker`)
    REFERENCES `odplanDDBB`.`worker` (`idWorker`),
  CONSTRAINT `fk_abilities_2`
    FOREIGN KEY (`idTask`)
    REFERENCES `odplanDDBB`.`taskType` (`idTask`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `odplanDDBB`.`calendar`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `odplanDDBB`.`calendar` (
  `idWorker` INT NULL DEFAULT NULL,
  `date` DATE NULL DEFAULT NULL,
  `workTime` INT NULL DEFAULT NULL,
  INDEX `fk_calendar_1_idx` (`idWorker` ASC) VISIBLE,
  CONSTRAINT `fk_calendar_1`
    FOREIGN KEY (`idWorker`)
    REFERENCES `odplanDDBB`.`worker` (`idWorker`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `odplanDDBB`.`lastGeneratedDates`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `odplanDDBB`.`lastGeneratedDates` (
  `lastDate` DATE NOT NULL,
  PRIMARY KEY (`lastDate`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `odplanDDBB`.`productType`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `odplanDDBB`.`productType` (
  `idproductType` INT NOT NULL,
  `name` VARCHAR(45) COLLATE 'utf8mb3_spanish_ci' NULL DEFAULT NULL,
  `mainFolderPath` VARCHAR(255) COLLATE 'utf8mb3_spanish_ci' NULL DEFAULT NULL,
  `modelOf` INT NULL DEFAULT NULL,
  `type` ENUM('TYPE', 'MODEL', 'ORDER') COLLATE 'utf8mb3_spanish_ci' NULL DEFAULT NULL COMMENT 'if null is not an order, is a model or a type',
  PRIMARY KEY (`idproductType`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `odplanDDBB`.`rank`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `odplanDDBB`.`rank` (
  `idRank` INT NOT NULL,
  `name` VARCHAR(45) COLLATE 'utf8mb3_spanish_ci' NULL DEFAULT NULL,
  PRIMARY KEY (`idRank`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `odplanDDBB`.`taskInType`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `odplanDDBB`.`taskInType` (
  `idtaskInType` INT NOT NULL,
  `idproductType` INT NULL DEFAULT NULL,
  `idTask` INT NULL DEFAULT NULL,
  `taskInstructions` VARCHAR(255) COLLATE 'utf8mb3_spanish_ci' NULL DEFAULT NULL,
  `initTime` INT NULL DEFAULT NULL,
  `pieceTime` INT NULL DEFAULT NULL,
  `nextTask` INT NULL DEFAULT NULL,
  `date` DATE NULL DEFAULT NULL,
  `idWorker` INT NOT NULL,
  `done` ENUM('YES', 'NO', 'MODEL') COLLATE 'utf8mb3_spanish_ci' NULL DEFAULT NULL,
  PRIMARY KEY (`idtaskInType`),
  INDEX `fk_taskInType_2_idx` (`idproductType` ASC) VISIBLE,
  INDEX `fk_taskInType_1_idx` (`idTask` ASC) VISIBLE,
  INDEX `fk_taskInType_3_idx` (`idWorker` ASC) VISIBLE,
  CONSTRAINT `fk_taskInType_1`
    FOREIGN KEY (`idTask`)
    REFERENCES `odplanDDBB`.`taskType` (`idTask`),
  CONSTRAINT `fk_taskInType_2`
    FOREIGN KEY (`idproductType`)
    REFERENCES `odplanDDBB`.`productType` (`idproductType`),
  CONSTRAINT `fk_taskInType_3`
    FOREIGN KEY (`idWorker`)
    REFERENCES `odplanDDBB`.`worker` (`idWorker`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `odplanDDBB`.`taskDependency`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `odplanDDBB`.`taskDependency` (
  `idtaskInType` INT NOT NULL,
  `idtaskInTypeDependeny` INT NULL DEFAULT NULL,
  PRIMARY KEY (`idtaskInType`),
  INDEX `fk_taskDependency_2_idx` (`idtaskInTypeDependeny` ASC) VISIBLE,
  CONSTRAINT `fk_taskDependency_1`
    FOREIGN KEY (`idtaskInType`)
    REFERENCES `odplanDDBB`.`taskInType` (`idtaskInType`),
  CONSTRAINT `fk_taskDependency_2`
    FOREIGN KEY (`idtaskInTypeDependeny`)
    REFERENCES `odplanDDBB`.`taskInType` (`idtaskInType`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `odplanDDBB`.`weekTemplate`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `odplanDDBB`.`weekTemplate` (
  `idweekTemplate` INT NOT NULL,
  `idWorker` INT NULL DEFAULT NULL,
  `monday` INT(10) UNSIGNED ZEROFILL NULL DEFAULT NULL,
  `tuesday` INT(10) UNSIGNED ZEROFILL NULL DEFAULT NULL,
  `wednesday` INT(10) UNSIGNED ZEROFILL NULL DEFAULT NULL,
  `thursday` INT(10) UNSIGNED ZEROFILL NULL DEFAULT NULL,
  `friday` INT(10) UNSIGNED ZEROFILL NULL DEFAULT NULL,
  `saturday` INT(10) UNSIGNED ZEROFILL NULL DEFAULT NULL,
  `sunday` INT(10) UNSIGNED ZEROFILL NULL DEFAULT NULL,
  PRIMARY KEY (`idweekTemplate`),
  INDEX `fk_weekTemplate_1_idx` (`idWorker` ASC) VISIBLE,
  CONSTRAINT `fk_weekTemplate_1`
    FOREIGN KEY (`idWorker`)
    REFERENCES `odplanDDBB`.`worker` (`idWorker`))
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
